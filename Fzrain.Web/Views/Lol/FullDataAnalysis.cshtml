
@{
    ViewBag.Title = "Index";
    Layout = "LolBasePage.cshtml";
}
<style>
    .mainright {
        background-color: #373434;color: white;overflow: auto
    }
    .dataDiv {
        width: 150px;
        float: left
    }
</style>
@(Html.Kendo().Window()
        .Name("window").Visible(false)
          .Title("巅峰战绩")
    .Draggable()
    .Modal(true)
    .Width(1000).Height(470)
    .Actions(actions => actions.Minimize().Maximize().Close()).Position(a => a.Left(335).Top(100))
)
<div class="mainright">
    <div>
        @Html.Kendo().Button().Content("重置数据").Name("resetData")
        @Html.Kendo().Button().Content("获取数据").Name("btnGetData").Events(e => e.Click("GetData"))
        @{
            var dataInfo = new List<DropDownListItem>
            {
                new DropDownListItem {Text = "贡献值", Value = "2"},
                new DropDownListItem {Text = "贡献排名", Value = "3"},
                new DropDownListItem {Text = "输出伤害", Value = "1"},
                new DropDownListItem {Text = "场均击杀", Value = "4"}
            };
        }
        @Html.Kendo().DropDownList().BindTo(dataInfo).Name("dataInfo")

        @Html.Kendo().CheckBox().Name("isAsc").Label("是否升序")
        @Html.Kendo().CheckBox().Name("isMine").Label("我的数据")
    </div>

</div>

<script type="text/javascript">
    function GetData() {
        //  $("#div1").html("");
        $.post("AnalysisData", { dataType: $("#dataInfo").val(), isAsc: $("#isAsc").prop("checked"), isMine: $("#isMine").prop("checked") }, function(data) {
            var html = "<div  class='dataDiv'>";
            for (var i = 0; i < data.length; i++) {
                html += "<div>" +
                    "<span><img width='50' src='../../Content/lolpng/" + data[i].Key + ".png' alt='' /></span>" +
                    "<span>" + data[i].Value.toFixed(2) + "<a url='" + data[i].Key + "'>巅峰战绩</a></span>" +
                    "" +
                    "</div>";

            }
            $(".mainright").append(html + "</div>");
            regeditBtn();
        });

    }

    function regeditBtn() {
        $("a[url]").click(function() {
            var kendoWindow = $("#window").data("kendoWindow");
            $.post("BrightInfo", { championId: $(this).attr("url"), isMine: $("#isMine").prop("checked") }, function(data) {
                kendoWindow.content(data);
                kendoWindow.center().open();
            });
        });
    }
</script>
